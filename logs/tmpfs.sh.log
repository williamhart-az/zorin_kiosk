2025-05-20 16:22:06 - Starting tmpfs.sh script.
2025-05-20 16:22:06 - Running as root.
2025-05-20 16:22:06 - Checking for environment file...
2025-05-20 16:22:06 - ENV_FILE not defined, using default: features/../.env
2025-05-20 16:22:06 - Checking if environment file exists at: features/../.env
2025-05-20 16:22:06 - Sourcing environment file: features/../.env
2025-05-20 16:22:06 - Environment file sourced successfully. KIOSK_USERNAME=kiosk, OPT_KIOSK_DIR=/opt/kiosk, WALLPAPER_SYSTEM_PATH=/usr/share/backgrounds/Desktop-3840x2160.jpg, TEMPLATE_DIR=/opt/kiosk/templates
2025-05-20 16:22:06 - Ensured OPT_KIOSK_DIR exists: /opt/kiosk
2025-05-20 16:22:06 - Creating wallpaper setting script...
2025-05-20 16:22:06 - Wallpaper setting script /opt/kiosk/set_wallpaper.sh created and made executable.
2025-05-20 16:22:06 - Mounting tmpfs for kiosk user kiosk...
2025-05-20 16:22:06 - Unmounting existing tmpfs or mount at /home/kiosk...
2025-05-20 16:22:06 - Warning: Failed to unmount /home/kiosk. It might not have been mounted.
2025-05-20 16:22:06 - Creating directory /home/kiosk if it doesn't exist...
2025-05-20 16:22:06 - Directory /home/kiosk created/ensured with mode 1777.
2025-05-20 16:22:06 - Mounting tmpfs at /home/kiosk with size 512M...
2025-05-20 16:22:06 - tmpfs mounted successfully.
2025-05-20 16:22:06 - Creating necessary directories in tmpfs for user kiosk...
2025-05-20 16:22:06 - Standard user directories created in tmpfs.
2025-05-20 16:22:06 - Configuring fstab for tmpfs mounting on boot...
2025-05-20 16:22:06 - tmpfs mount for /home/kiosk already exists in fstab.
2025-05-20 16:22:06 - Setting ownership for kiosk user files in /home/kiosk/ and scripts in /opt/kiosk...
2025-05-20 16:22:06 - Ownership and script permissions set.
2025-05-20 16:22:06 - Copying autostart entries from /opt/kiosk/templates/.config/autostart/ to /home/kiosk/.config/autostart/...
2025-05-20 16:22:06 - Autostart entries copied and ownership set.
2025-05-20 16:22:06 - Creating persistent dconf settings script...
2025-05-20 16:22:06 - Persistent dconf settings script /opt/kiosk/persistent_dconf_settings.sh created and made executable.
2025-05-20 16:22:06 - Creating direct dconf settings script (not used by default, for manual run if needed)...
2025-05-20 16:22:06 - Created direct dconf settings script (for manual use): /opt/kiosk/direct_dconf_settings_manual.sh.
2025-05-20 16:22:06 - Running persistent dconf script for user kiosk...
2025-05-20 16:22:06 - Persistent dconf script executed.
2025-05-20 16:22:06 - Creating systemd service for kiosk home initialization...
2025-05-20 16:22:06 - Enabling kiosk-home-init.service...
2025-05-20 16:22:06 - kiosk-home-init.service enabled.
2025-05-20 16:22:06 - tmpfs.sh script finished.
